name: Pushbutton counter test
version: 1
author: Jan Prochazka (jan.prochazka@espressif.com) + Jakub Andrysek (jakub.andrysek@espressif.com)

steps:
  #### GPIO read - basic test
  - wait-serial: "GPIO read - basic START"
  - wait-serial: "BTN read as HIGH after pinMode INPUT_PULLUP"

  # Set the button to HIGH
  - set-control:
      part-id: btn1
      control: pressed
      value: 1

  - wait-serial: "BTN read as LOW"

  # Set the button to LOW
  - set-control:
      part-id: btn1
      control: pressed
      value: 0
  - wait-serial: "BTN read as HIGH"



  #### GPIO write - basic test
  - wait-serial: "GPIO write - basic START"
  - wait-serial: "GPIO LED set to OUTPUT"
  - expect-pin:
      part-id: led1
      pin: A # Anode pin
      value: 0

  - wait-serial: 'LED set to HIGH'
  - expect-pin:
      part-id: led1
      pin: A # Anode pin
      value: 1
  - wait-serial: 'LED set to LOW'
  - expect-pin:
      part-id: led1
      pin: A # Anode pin
      value: 0


  #### GPIO end test
  - wait-serial: "GPIO test END"
